import{d as V,K,c as U,a as T,x as q,h as c,i as e,L as v,M as b,N as G,F as u,v as h,j as d,k as F,O as W,P as p,Q as _,g as l,I as A,s as Q,R as w,S as m,U as i,V as $,W as H,X,m as z}from"./index-422a1f0d.js";const J=[{id:"prof-0",name:"mercenary",description:"The Mercenary fights for money, the spoils of war, and the taste of blood. All Mercenaries dream of untold riches; for most of them, the reality consists of an early death and an unmarked grave. Mercenaries roam the Old World, from one war to another - inevitably someone will hire their swords to settle a grievance. Rich Nobles, Merchants, and others take on Mercenaries to bring an argument to a swift conclusion; the Old World kingdoms generate enough conflict to keep many thousands of Mercenaries fully employed. Eventually, however, the wiser ones realise that there is no crock of gold for the hired fighter, and so they turn to adventuring for variety or in search of greater rewards.",statsDevelopment:{hp:2,melee:10,ranged:10,dexterity:0,strength:1,thoughtness:0,speed:0,initiative:10,attacks:1,inteligence:0,willpower:0,charisma:0},skills:["disarm","dodge","secret_language_battle","mighty_blow","strike_to_stun","animal_care","lockpicking","specialist_weapon_two_handed"]},{id:"prof-1",name:"bounty hunter",statsDevelopment:{hp:2,melee:10,ranged:10,dexterity:0,strength:1,thoughtness:0,speed:0,initiative:10,attacks:0,inteligence:0,willpower:0,charisma:0},skills:["follow_trail","marksmanship","mighty_blow"]}],Y={warrior:J},Z=["onSubmit"],ee={class:"m-form o-characterGenerator__sheet"},te=e("h2",{class:"o-characterGenerator__header"},"Character creation sheet",-1),ae={class:"m-form__row o-characterGenerator__row"},se={class:"m-form__column"},oe=e("label",{for:"playerName",class:"header"},"Name",-1),re={class:"m-form__row o-characterGenerator__row"},ne={class:"m-form__column"},ie=e("h2",{class:"o-characterGenerator__header"},"Race",-1),ce={class:"o-characterGenerator__item"},le=e("label",{for:"human"},"Human",-1),de={class:"o-characterGenerator__item"},_e=e("label",{for:"dwarf"},"Dwarf",-1),me=e("div",{class:"m-form__column"},[e("p",{class:"a-text"}," Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam labore debitis nam. Cupiditate alias ad voluptatum quos aut, magnam ea totam culpa vero fuga. Adipisci asperiores quae sint dicta. Repellendus? ")],-1),ue={class:"m-form__row o-characterGenerator__row"},he={class:"m-form__column"},ve=e("label",{for:"bio",class:"o-characterGenerator__header"},"Bio",-1),fe={class:"m-form__row o-characterGenerator__row"},pe={class:"m-form__column"},we=e("h2",{class:"o-characterGenerator__header"},"Stats",-1),ye={id:"statList",class:"o-characterGenerator__statList"},ge={class:"a-text"},be={class:"a-text"},Ge={class:"m-form__row o-characterGenerator__row"},ke={class:"m-form__column"},Ie={class:"m-form__column"},xe={class:"m-form__row o-characterGenerator__row"},Ne={class:"m-form__column"},Be=e("h2",{class:"o-characterGenerator__header"},"Inventory",-1),Ee={class:"o-characterGenerator__inventory"},Se={class:"m-form__row o-characterGenerator__row"},Re={class:"m-form__row"},Me=e("h2",{class:"o-characterGenerator__header"},"Profession",-1),Pe={class:"m-form__column"},je=["for"],Oe=["value","onChange"],Ce={class:"o-characterGenerator__statList"},De={class:"a-text"},Le={class:"a-text"},Ve={class:"o-characterGenerator__skills"},Ke=e("p",null,[e("b",null,"Skills:")],-1),Ue=e("br",null,null,-1),Te={class:"o-characterGenerator__skillList"},qe=e("div",{class:"m-form__row o-characterGenerator__row"},[e("div",{class:"m-form__column"},[e("button",{type:"submit",id:"createPlayerButton",class:"a-button action__button"},"Create")])],-1),Ae=V({__name:"CharacterCreation",setup(Fe){const k=K(),{initPlayer:I,createPlayer:x,resetPlayer:N}=U(),{updateGameState:B}=T(),a=q(I.value),E=r=>{const s=w.find(t=>t.id===r);if(s)return s.name},S=()=>{if(!a.value)throw new Error("No Player object to roll stats");if(a.value.race==="human"){const r={hp:m()+4,melee:i()*2+20,ranged:i()*2+20,dexterity:i()+20,strength:m()+1,thoughtness:m()+1,speed:m()+2,initiative:i()*2+20,attacks:1,inteligence:i()*2+20,willpower:i()*2+20,charisma:i()*2+2};Object.entries(r).forEach(([s,t])=>{const o=Object.values(p).find(n=>n===s);o&&(a.value.stats[o]=t)})}if(a.value.race==="dwarf"){const r={hp:m()+5,melee:i()*2+30,ranged:i()*2+10,dexterity:i()+10,strength:m()+1,thoughtness:m()+2,speed:$()+2,initiative:i()*2+10,attacks:1,inteligence:i()*2+20,willpower:i()*2+40,charisma:i()*2+1};Object.entries(r).forEach(([s,t])=>{const o=Object.values(p).find(n=>n===s);o&&(a.value.stats[o]=t)})}},R=r=>{a.value.profession=void 0,a.value.profession=new H(r.id,r.name,r.description,r.statsDevelopment,w),Object.entries(r.statsDevelopment).forEach(([t,o])=>{const n=Object.values(p).find(f=>f===t);if(!n)throw new Error("No statName");t&&n===t&&a.value.profession&&(a.value.profession.statsDevelopment[t]=o)});const s=[];return r.skills.forEach(t=>{const o=w.find(n=>n.id===t);o&&s.push(o)}),s&&(a.value.skills=s),a.value.profession},M=()=>{a.value.inventory.encumbrance.max=a.value.stats.strength*100},P=()=>{a.value.inventory.inventory=[];const r=[],s=new _().createItemById("sword"),t=new _().createItemById("jacket"),o=new _().createItemById("sleeves"),n=new _().createItemById("health"),f=new _().createItemById("torch"),C=new _().createItemById("metal scrap"),D=new _().createItemById("metal scrap");r.push(s,t,n,f,C,o,D),r.forEach(y=>{if(!y){console.error("cant create item");return}const{status:L,message:g}=a.value.inventory.addItem(y,a.value.id);if(!L)throw Error(g);console.log(g)})},j=()=>{const r=X()*2;a.value.inventory.gold=r},O=async()=>{a.value&&(await N(),x(a.value),B(z.Travel),k.push({name:"home"}))};return(r,s)=>(l(),c("div",{id:"characterGenerator",class:"o-characterGenerator",onSubmit:W(O,["prevent"])},[e("form",ee,[te,e("div",ae,[e("div",se,[oe,v(e("input",{type:"text",name:"playerName",class:"a-input","onUpdate:modelValue":s[0]||(s[0]=t=>a.value.name=t)},null,512),[[b,a.value.name]])])]),e("div",re,[e("div",ne,[ie,e("div",ce,[le,v(e("input",{type:"radio",name:"playerRace",value:"human",class:"item__input",checked:"true","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.race=t)},null,512),[[G,a.value.race]])]),e("div",de,[_e,v(e("input",{type:"radio",name:"playerRace",value:"dwarf",class:"item__input","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.race=t)},null,512),[[G,a.value.race]])])]),me]),e("div",ue,[e("div",he,[ve,v(e("textarea",{type:"text",name:"bio",id:"characterBio",class:"a-input a-input__textarea",rows:"5","onUpdate:modelValue":s[3]||(s[3]=t=>a.value.description=t)},null,512),[[b,a.value.description]])])]),e("div",fe,[e("div",pe,[we,e("button",{type:"button",onClick:s[4]||(s[4]=t=>(S(),j(),M(),P())),id:"generateStatsButton",class:"a-button action__button"}," Roll dice "),e("div",ye,[(l(!0),c(u,null,h(a.value.stats,(t,o,n)=>(l(),c("div",{class:"o-characterGenerator__statItem",key:n},[e("p",ge,d(o),1),e("p",be,d(t),1)]))),128))])])]),e("div",Ge,[e("div",ke,"Gold: "+d(a.value.inventory.gold),1),e("div",Ie,"Encumbrance: "+d(a.value.inventory.encumbrance.max)+" pts",1)]),e("div",xe,[e("div",Ne,[Be,(l(!0),c(u,null,h(a.value.inventory.inventory,t=>(l(),c("div",{id:"charInventory",class:"o-characterGenerator__inventory",key:t.id},[e("div",Ee,d(t.name)+" ",1)]))),128))])]),e("div",Se,[e("div",Re,[Me,e("form",Pe,[(l(!0),c(u,null,h(F(Y).warrior,t=>(l(),c("div",{key:t.id,class:"m-form__item m-form__item--column"},[e("label",{for:t.name},[A(d(t.name)+" ",1),e("input",{type:"radio",class:"item__input",name:"profession",value:t,onChange:o=>R(t)},null,40,Oe)],8,je),e("div",Ce,[(l(!0),c(u,null,h(Object.entries(t.statsDevelopment),([o,n])=>(l(),c(u,null,[n!==0?(l(),c("div",{key:o,class:"o-characterGenerator__statItem"},[e("p",De,d(o),1),e("p",Le,"+"+d(n),1)])):Q("",!0)],64))),256))]),e("div",Ve,[Ke,Ue,e("div",Te,[(l(!0),c(u,null,h(t.skills,o=>(l(),c("p",{key:o,class:"a-text"},d(E(o)),1))),128))])])]))),128))])])]),qe])],40,Z))}});export{Ae as default};
